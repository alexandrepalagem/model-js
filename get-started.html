<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ModelJS</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/markdown.css" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://rafaeleyng.github.io/model-js/">ModelJS</a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="http://rafaeleyng.github.io/model-js/">Home</a>
          </li>
          <li class="active">
            <a href="http://rafaeleyng.github.io/model-js/get-started.html">Get started</a>
          </li>
          <li>
            <a href="http://rafaeleyng.github.io/model-js/docs.html">Docs</a>
          </li>
          <li>
            <a href="http://rafaeleyng.github.io/model-js-ex01/" target="_blank">Example app</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

<article class="markdown-body">

<h1>
<a id="user-content-get-started-with-modeljs" class="anchor" href="#get-started-with-modeljs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Get Started With ModelJS</h1>

<h2>
<a id="user-content-schema" class="anchor" href="#schema" aria-hidden="true"><span class="octicon octicon-link"></span></a>Schema</h2>

<p>You must define a schema in order to work with ModelJS. There are 2 ways to define your schema: using a plain JavaScript objects or using the <code>ModelJS.SchemaEntity</code> constructor.</p>

<p>Using plain JavaScript objects:</p>

<pre><code>var schema = {
  _Base: { 
    attrs: ['name'],
  },

  Game: {},

  Player: { 
    attrs: ['score'],
    relsToOne: ['Game'],
    relsToMany: ['Badge']
  },

  Badge: {
    attrs: ['description']
  }
};
</code></pre>

<p>Using the <code>ModelJS.SchemaEntity</code> constructor:</p>

<pre><code>var schema = {
  _Base:  new ModelJS.SchemaEntity(['name']),
  Game:   new ModelJS.SchemaEntity(),
  Player: new ModelJS.SchemaEntity(['score'], ['Game'], ['Badge']),
  Badge:  new ModelJS.SchemaEntity(['description'])
};
</code></pre>

<p>The order of the parameters is</p>

<pre><code>ModelJS.SchemaEntity(attrs, relsToOne, relsToMany);
</code></pre>

<h2>
<a id="user-content-inheritance" class="anchor" href="#inheritance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Inheritance</h2>

<p>Every ModelJSEntity object inherits attributes from an entity called <code>_DefaultBase</code>. Currently, the only inherited attribute is the <code>id</code>, which works pretty much as an id in a relational database.</p>

<p>Additionaly, you can specify a custom base entity, which <em>must</em> be called <code>_Base</code>. Every ModelJSEntity object will inherit the attributes defined in your <code>_Base</code>.</p>

<p>Note that defining a <code>_Base</code> won't have any impact on the <code>_DefaultBase</code>. So <strong>you don't have to define the <code>id</code> attribute</strong> yourself.</p>

<h2>
<a id="user-content-config" class="anchor" href="#config" aria-hidden="true"><span class="octicon octicon-link"></span></a>Config</h2>

<p>You can, optionally, pass a configuration object. Currently, there are two possible configurations:</p>

<ul>
<li><p><code>storage</code>: defines the storage mechanism you want to use. This defaults to <code>'localStorage'</code>. The other valid values are <code>'webSQL'</code> and <code>'indexedDB'</code>, but <strong>there is no support for them</strong> right now.</p></li>
<li><p><code>pluralization</code>: ModelJS pluralizes entity names by just adding an 's' at the end of the word. If you want to have a correct pluralization for your entity names, you should pass everything that doesn't follow this pattern.</p></li>
</ul>

<pre><code>var config = {
  storage: 'localStorage', // no need to pass it, is the default
  pluralization: {
    Country: 'Countries',
    City: 'Cities'
  }
};
</code></pre>

<h2>
<a id="user-content-initializing-modeljs" class="anchor" href="#initializing-modeljs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Initializing ModelJS</h2>

<pre><code>var modeljs = new ModelJS(schema, config);
</code></pre>

<h2>
<a id="user-content-crud" class="anchor" href="#crud" aria-hidden="true"><span class="octicon octicon-link"></span></a>CRUD</h2>

<h3>
<a id="user-content-create" class="anchor" href="#create" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create</h3>

<pre><code>var rafael = modeljs.save('Person', {name: 'Rafael', profession: 'Dev'});`
var id = rafael.id; // generated id
</code></pre>

<h3>
<a id="user-content-read" class="anchor" href="#read" aria-hidden="true"><span class="octicon octicon-link"></span></a>Read</h3>

<pre><code>var rafael = modeljs.find('Person', id);
</code></pre>

<h3>
<a id="user-content-update" class="anchor" href="#update" aria-hidden="true"><span class="octicon octicon-link"></span></a>Update</h3>

<pre><code>rafael.name = 'Rafael Eyng';

rafael.save();
// or
modeljs.save('Person', rafael);
</code></pre>

<h3>
<a id="user-content-delete" class="anchor" href="#delete" aria-hidden="true"><span class="octicon octicon-link"></span></a>Delete</h3>

<pre><code>rafael.delete();
// or
modeljs.delete('Person', id);
</code></pre>

<h2>
<a id="user-content-other-operations" class="anchor" href="#other-operations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Other operations</h2>

<h3>
<a id="user-content-all-count-first-last-page" class="anchor" href="#all-count-first-last-page" aria-hidden="true"><span class="octicon octicon-link"></span></a>all, count, first, last, page</h3>

<pre><code>var people = modeljs.all('Person');
var count = modeljs.count('Person');

var first = modeljs.first('Person');
var last = modeljs.last('Person');

var page1 = modeljs.page('Person', 0, 10); // page number, page size
</code></pre>

<h3>
<a id="user-content-filter" class="anchor" href="#filter" aria-hidden="true"><span class="octicon octicon-link"></span></a>filter</h3>

<p>Allows you to perform more complex queries</p>

<pre><code>var rafaelDev = modljs.filter('Person', function(record) {
  return record.name === 'Rafael' &amp;&amp; record.profession.toLowerCase() === 'dev';
});
</code></pre>

<h2>
<a id="user-content-relationships" class="anchor" href="#relationships" aria-hidden="true"><span class="octicon octicon-link"></span></a>Relationships</h2>

<h3>
<a id="user-content-relationships-to-one" class="anchor" href="#relationships-to-one" aria-hidden="true"><span class="octicon octicon-link"></span></a>Relationships 'to one'</h3>

<p>You can set a relationship when creating a new object:</p>

<pre><code>var brazil = modeljs.save('Country', {name: 'Brazil'});
var rs = modeljs.save('State', 
  {
    name: 'Rio Grande do Sul', 
    _countryId: brazil.id
  }
);

rs.Country.name; // 'Brazil'
rs.countryId; // 1
</code></pre>

<p>Or later:</p>

<pre><code>var brazil = modeljs.save('Country', {name: 'Brazil'});
var rs = modeljs.save('State', {name: 'Rio Grande do Sul'});

rs.Country = brazil;
// or
rs.countryId = brazil.id;

rs.save();
</code></pre>

<p>ModelJS will handle the inverse relationship:</p>

<pre><code>var rs = modeljs.save('State', {name: 'Rio Grande do Sul'});

var portoAlegre = modeljs.save('City', {name: 'Porto Alegre', _stateId: rs.id});
var feliz = modeljs.save('City', {name: 'Feliz', _stateId: rs.id});

rs.Cities; // [portoAlegre, feliz]
</code></pre>

<h3>
<a id="user-content-relationships-to-many" class="anchor" href="#relationships-to-many" aria-hidden="true"><span class="octicon octicon-link"></span></a>Relationships 'to many'</h3>

<p>You can <code>add</code> objects <code>To</code>, and <code>remove</code> objects <code>From</code> a 'to many' relationship</p>

<pre><code>var bronze = modeljs.save('Badge', {name: 'Bronze'});
var silver = modeljs.save('Badge', {name: 'Silver'});
var gold = modeljs.save('Badge', {name: 'Gold'});

var player = modeljs.save('Player', {
  name: 'Bob',
  _badgesId: [bronze.id, silver.id]
});

modeljs.addTo(gold, player);

player.Badges.length; // 3
player.Badges[2].name; // 'Gold'

modeljs.removeFrom(silver, player);

player.Badges.length; // 2
player.Badges[1].name; // 'Gold'

</code></pre>
</article>
</body>

</html>
